<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<!-- Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *      
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License
-->
        <ModulePrefs title="Hangout Starter">
                <Require feature="rpc" />
                <Require feature="views" />
                <Require feature="locked-domain" />
        </ModulePrefs>
        <Content type="html"><![CDATA[     

<html>
<head>
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" />
  <link href="//hangouts-against-humanity.appspot.com/static/animate.css" rel="stylesheet" />
  <link href="//hangouts-against-humanity.appspot.com/static/hah.css" rel="stylesheet" />
</head>
<body ng-controller="TableCtrl">
  <div ng-if="initialState.choose" class="leftTopColumn" ng-controller="CardSetSelect">
    <label class="cardset" ng-repeat="sets in cardSets track by sets.label"><input type="checkbox" ng-model="cards[sets.value]">{{sets.label}}</label>
    <button ng-click="submit()">Choose Card Sets</button>
  </div>
  <div ng-if="!initialState.choose" class="leftTopColumn">
    <div ng-bind-html="question.text" class="card black"></div>
    <dl class="scoreboard">
      <dt ng-repeat-start="(person,points) in scoreboard">{{person}}</dt>
      <dd ng-repeat-end>{{points}}</dd>
    </dl>
    <div ng-if="isReader">
        <button ng-click="drawNewQuestion()" ng-hide="disableDrawQuestion">Draw Question</button>
        <button ng-click="showAnswers()" ng-hide="disableShowAnswers">Show Answers</button>
        <button ng-click="selectWinner()" ng-hide="disableSelectWinner">Select Winner</button>
        <button ng-click="moveToNext()" ng-hide="disableMoveToNext">Move to next Player</button>
        <p>Submitted Cards</p>
        <ul ng-hide="disableSelectWinner" ng-repeat="player in submittedPlayers" ng-click="selected.winner = player" ng-class="{'possibleWinner': 'selected.winner == player'}">
            <li ng-repeat="card in player.cards" class="card white">{{card.text}}</li>
        </ul>
        <p ng-show="disableSelectWinner" ng-pluralize count="submittedPlayers.length" when="{'0': 'No submissions', '1': '1 submission', 'other': '{} submissions'}"></p>
    </div>
    <div ng-if="!isReader">
      <ul class="submission" ng-class="(1 < question.draw ? 'double' : 'single')">
        <li ng-repeat="card in submittedCards" class="card white" ng-click="unselectCard($index)">{{card.text}}</li>
      </ul>
    </div>
    <ul class="sounds">
      <li><button ng-click="playSound('yeah')">Yeah!</button></li>
      <li><button ng-click="playSound('boo')">Boooo!</button></li>
      <li><button ng-click="playSound('cheer')">Cheer!</button></li>
      <li><button ng-click="playSound('timer')">Hurry up!</button></li>
      <li><button ng-click="playSound('sadtrombone')">Fail!</button></li>
      <li><button ng-click="playSound('rimshot')">Ba-dum-psst!</button></li>
    </ul>
  </div>
  <div ng-if="!initialState.choose" class="bottomColumn">
    <button ng-hide="isReader" ng-click="submitCards(submittedCards)" ng-disabled="disableSubmit && (question.draw == submittedCards.length)">Submit Choices</button>
    <ul class="hand">
      <li ng-repeat="card in hand" class="card white" ng-click="selectCard($index)">{{card.text}}</li>
    </ul>
  </div>


<script src="//plus.google.com/hangouts/_/api/v1/hangout.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.12/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.12/angular-animate.min.js"></script>
<script src="//hangouts-against-humanity.appspot.com/static/hah.js"></script>
<script>
function init() {
  // When API is ready...
  gapi.hangout.onApiReady.add(
      function(eventObj) {
        if (eventObj.isApiReady) {
          angular.bootstrap(document, ['HangoutsAgainstHumanity']);
        }
      });
}

// Wait for gadget to load.
gadgets.util.registerOnLoadHandler(init);
</script>

</body>
</html>
]]>
</Content>
</Module>